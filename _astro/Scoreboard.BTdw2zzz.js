import{p as $,i as ht,a as p}from"./props.Bj6o9DXP.js";import{o as yt,a as wt}from"./index-client.DbL1ygyQ.js";import{p as kt,f as c,t as h,a as l,b as St,s as n,m as E,g as a,c as o,d as r,r as e,o as tt,q as Rt,e as It}from"./template.DA8Zrd-d.js";import{s as v}from"./render.BJRwOoAD.js";import{e as et}from"./each.Bk1PdW2q.js";import{s as Tt,c as jt}from"./attributes.BwuaZUqp.js";import{e as rt}from"./utils.D8_OE2hv.js";import{s as Dt}from"./ctfd.svelte.CUWNQAoX.js";import{P as Pt}from"./PixelarticonsGroup.CwGYtPDM.js";import{S as qt}from"./SvgSpinners270Ring.BZVWEM-c.js";import"./router.DnZMHVsn.js";var Ct=c('<div class="flex items-center justify-center gap-4 py-12 text-text"><!> <span>Loading scoreboard...</span></div>'),Ft=c('<div class="text-center p-8 bg-red-700 text-text"><p class="mb-4"> </p> <button class="px-4 py-2 bg-white text-surface-000 hover:bg-gray-400 transition-colors">Retry</button></div>'),Lt=c('<div class="text-sm text-surface-400 text-right"> </div>'),Mt=c('<div class="flex justify-between items-center bg-surface-200 px-3 py-2 rounded"><span class="text-text font-medium"> </span> <span class="text-sm text-surface-400"> </span></div>'),Nt=c('<tr><td colspan="3" class="px-8 py-4 border-b border-surface-300 bg-surface-100"><div class="space-y-2"><h4 class="font-semibold text-text mb-3">Team Members:</h4> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"></div></div></td></tr>'),At=c('<tr class="hover:bg-surface-200 transition-colors"><td class="px-4 py-3 border-b border-surface-300 text-center font-bold"><span> </span></td><td class="px-4 py-3 border-b border-surface-300 min-w-[200px]"><div class="flex items-center gap-2"><a class="text-text hover:underline font-bold"> </a></div></td><td class="px-4 py-3 border-b border-surface-300 text-right font-bold text-text"> </td></tr> <!>',1),Et=c('<div class="space-y-4"><!> <div class="overflow-x-auto bg-surface-100/50 backdrop-blur-md border border-surface-300"><table class="w-full border-collapse"><thead><tr class="bg-surface-200"><th class="px-4 py-3 text-left font-semibold text-text border-b border-surface-300 sticky top-0 bg-surface-200/90 backdrop-blur w-16">Rank</th><th class="px-4 py-3 text-left font-semibold text-text border-b border-surface-300 sticky top-0 bg-surface-200/90 backdrop-blur">Crew Name</th><th class="px-4 py-3 text-right font-semibold text-text border-b border-surface-300 sticky top-0 bg-surface-200/90 backdrop-blur w-24">Score</th></tr></thead><tbody></tbody></table></div></div>'),Gt=c('<div class="text-center py-16 text-text"><div class="mb-4"><!></div> <h3 class="text-xl font-semibold mb-2 text-text">No scoreboard data available</h3> <p>The competition may not have started yet, or scores are not visible.</p></div>'),Ut=c('<div class="font-mono"><div class="mb-8"><div class="flex justify-between items-center"><h1 class="font-display-mono font-bold text-2xl uppercase text-text">Scoreboard</h1> <button class="px-4 py-2 bg-white text-surface-000 hover:bg-gray-400 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed transition-colors"> </button></div></div> <!> <!> <!> <!></div>');function Zt(at,R){kt(R,!1);let G=$(R,"autoRefresh",8,!0),I=$(R,"refreshInterval",8,3e4),b=E(null),f=E(!0),x=E(null),st=new Set,T=null;async function y(){n(f,!0),n(x,null);try{const t=await Dt.ctfd.scoreboard.getScoreboardList();t.ok&&t.data&&t.data.success?n(b,t.data.data):(n(x,"Failed to load scoreboard"),n(b,null))}catch(t){n(x,"Failed to load scoreboard"),n(b,null),console.error("Error loading scoreboard:",t)}finally{n(f,!1)}}function ot(t){return t===1?"ðŸ¥‡":t===2?"ðŸ¥ˆ":t===3?"ðŸ¥‰":t.toString()}function dt(t){return t<=3?"text-xl font-bold":t<=10?"text-lg font-semibold":"text-base"}yt(()=>{y(),G()&&I()>0&&(T=setInterval(y,I()))}),wt(()=>{T&&clearInterval(T)}),ht();var j=Ut(),D=r(j),U=r(D),w=o(r(U),2),it=r(w,!0);e(w),e(U),e(D);var z=o(D,2);{var lt=t=>{var s=Ct(),i=r(s);qt(i,{}),tt(2),e(s),l(t,s)};p(z,t=>{a(f)&&t(lt)})}var B=o(z,2);{var ct=t=>{var s=Ft(),i=r(s),m=r(i,!0);e(i);var k=o(i,2);e(s),h(()=>v(m,a(x))),rt("click",k,y),l(t,s)};p(B,t=>{a(x)&&t(ct)})}var H=o(B,2);{var nt=t=>{var s=Et(),i=r(s);{var m=u=>{var d=Lt(),S=r(d);e(d),h(()=>v(S,`Auto-refreshing every ${I()/1e3} seconds`)),l(u,d)};p(i,u=>{G()&&u(m)})}var k=o(i,2),J=r(k),K=o(r(J));et(K,5,()=>a(b),u=>u.account_id,(u,d)=>{var S=At(),P=Rt(S),q=r(P),C=r(q),ft=r(C,!0);e(C),e(q);var F=o(q),O=r(F),L=r(O),ut=r(L,!0);e(L),e(O),e(F);var Q=o(F),pt=r(Q,!0);e(Q),e(P);var xt=o(P,2);{var mt=_=>{var g=Nt(),V=r(g),W=r(V),X=o(r(W),2);et(X,5,()=>a(d).members,M=>M.id,(M,Y)=>{var N=Mt(),A=r(N),_t=r(A,!0);e(A);var Z=o(A,2),gt=r(Z);e(Z),e(N),h(()=>{v(_t,a(Y).name),v(gt,`${a(Y).score??""} pts`)}),l(M,N)}),e(X),e(W),e(V),e(g),l(_,g)};p(xt,_=>{a(d).members&&st.has(a(d).account_id)&&_(mt)})}h((_,g)=>{Tt(C,1,_),v(ft,g),jt(L,"href",`/fleet/team?team_id=${a(d).account_id??""}`),v(ut,a(d).name||"Unnamed"),v(pt,a(d).score)},[()=>dt(a(d).pos),()=>ot(a(d).pos)],It),l(u,S)}),e(K),e(J),e(k),e(s),l(t,s)};p(H,t=>{a(b)&&!a(f)&&t(nt)})}var vt=o(H,2);{var bt=t=>{var s=Gt(),i=r(s),m=r(i);Pt(m,{class:"w-16 h-16 mx-auto text-surface-300"}),e(i),tt(4),e(s),l(t,s)};p(vt,t=>{a(b)&&a(b).length===0&&!a(f)&&t(bt)})}e(j),h(()=>{w.disabled=a(f),v(it,a(f)?"Refreshing...":"Refresh")}),rt("click",w,y),l(at,j),St()}export{Zt as default};
