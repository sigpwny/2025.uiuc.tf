import{i as ct,a as _}from"./props.Cnc7M2bm.js";import{o as nt}from"./index-client.qxHWBHhE.js";import{p as vt,e as n,b as l,d as bt,s as c,m as C,g as a,h as d,i as e,x as H,r,t as D,f as ft,j as pt}from"./template.BGKbqTa9.js";import{s as f}from"./render.92hFe8tD.js";import{e as I}from"./each.C28cXzkQ.js";import{s as xt,c as ut}from"./attributes.BncxncTT.js";import{s as mt}from"./ctfd.svelte.CqsomuiX.js";import{P as _t}from"./PixelarticonsGroup.DK7ZY9T3.js";import{S as gt}from"./SvgSpinners270Ring.DBi1DYLx.js";import"./utils.D9RhwMV2.js";import"./router.DnZMHVsn.js";var ht=n('<div class="flex items-center justify-center gap-4 py-12 text-text"><!> <span>Loading scoreboard...</span></div>'),yt=n('<div class="text-center p-8 bg-red-700 text-text"><p class="mb-4"> </p></div>'),kt=n('<div class="flex justify-between items-center bg-surface-200 px-3 py-2 rounded"><span class="text-text font-medium"> </span> <span class="text-sm text-surface-400"> </span></div>'),wt=n('<tr><td colspan="3" class="px-8 py-4 border-b border-surface-300 bg-surface-100"><div class="space-y-2"><h4 class="font-semibold text-text mb-3">Team Members:</h4> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"></div></div></td></tr>'),St=n('<tr class="hover:bg-surface-200 transition-colors"><td class="px-4 py-3 border-b border-surface-300 text-center font-bold"><span> </span></td><td class="px-4 py-3 border-b border-surface-300 min-w-[200px]"><div class="flex items-center gap-2"><a class="text-text hover:underline font-bold"> </a></div></td><td class="px-4 py-3 border-b border-surface-300 text-right font-bold text-text"> </td></tr> <!>',1),jt=n('<div class="space-y-4"><div class="overflow-x-auto bg-surface-100/50 backdrop-blur-md border border-surface-300"><table class="w-full border-collapse"><thead><tr class="bg-surface-200"><th class="px-4 py-3 text-left font-semibold text-text border-b border-surface-300 sticky top-0 bg-surface-200/90 backdrop-blur w-16">Rank</th><th class="px-4 py-3 text-left font-semibold text-text border-b border-surface-300 sticky top-0 bg-surface-200/90 backdrop-blur">Crew Name</th><th class="px-4 py-3 text-right font-semibold text-text border-b border-surface-300 sticky top-0 bg-surface-200/90 backdrop-blur w-24">Score</th></tr></thead><tbody></tbody></table></div></div>'),Pt=n('<div class="text-center py-16 text-text"><div class="mb-4"><!></div> <h3 class="text-xl font-semibold mb-2 text-text">No scoreboard data available</h3> <p>The competition may not have started yet, or scores are not visible.</p></div>'),Rt=n('<div class="font-mono"><div class="mb-8"><h1 class="font-display-mono font-bold text-2xl uppercase text-text">Scoreboard</h1></div> <!> <!> <!> <!></div>');function Ut(J,K){vt(K,!1);let v=C(null),p=C(!0),x=C(null),O=new Set;async function Q(){c(p,!0),c(x,null);try{const t=await mt.ctfd.scoreboard.getScoreboardList();t.ok&&t.data&&t.data.success?c(v,t.data.data):(c(x,"Failed to load scoreboard"),c(v,null))}catch(t){c(x,"Failed to load scoreboard"),c(v,null),console.error("Error loading scoreboard:",t)}finally{c(p,!1)}}function V(t){return t===1?"ðŸ¥‡":t===2?"ðŸ¥ˆ":t===3?"ðŸ¥‰":t.toString()}function W(t){return t<=3?"text-xl font-bold":t<=10?"text-lg font-semibold":"text-base"}nt(()=>{Q()}),ct();var g=Rt(),F=d(e(g),2);{var X=t=>{var s=ht(),o=e(s);gt(o,{}),H(2),r(s),l(t,s)};_(F,t=>{a(p)&&t(X)})}var L=d(F,2);{var Y=t=>{var s=yt(),o=e(s),b=e(o,!0);r(o),r(s),D(()=>f(b,a(x))),l(t,s)};_(L,t=>{a(x)&&t(Y)})}var M=d(L,2);{var Z=t=>{var s=jt(),o=e(s),b=e(o),N=d(e(b));I(N,5,()=>a(v),h=>h.account_id,(h,i)=>{var $=St(),y=ft($),k=e(y),w=e(k),et=e(w,!0);r(w),r(k);var S=d(k),q=e(S),j=e(q),at=e(j,!0);r(j),r(q),r(S);var E=d(S),st=e(E,!0);r(E),r(y);var ot=d(y,2);{var dt=u=>{var m=wt(),G=e(m),U=e(G),z=d(e(U),2);I(z,5,()=>a(i).members,P=>P.id,(P,A)=>{var R=kt(),T=e(R),it=e(T,!0);r(T);var B=d(T,2),lt=e(B);r(B),r(R),D(()=>{f(it,a(A).name),f(lt,`${a(A).score??""} pts`)}),l(P,R)}),r(z),r(U),r(G),r(m),l(u,m)};_(ot,u=>{a(i).members&&O.has(a(i).account_id)&&u(dt)})}D((u,m)=>{xt(w,1,u),f(et,m),ut(j,"href",`/fleet/team?team_id=${a(i).account_id??""}`),f(at,a(i).name||"Unnamed"),f(st,a(i).score)},[()=>W(a(i).pos),()=>V(a(i).pos)],pt),l(h,$)}),r(N),r(b),r(o),r(s),l(t,s)};_(M,t=>{a(v)&&!a(p)&&t(Z)})}var tt=d(M,2);{var rt=t=>{var s=Pt(),o=e(s),b=e(o);_t(b,{class:"w-16 h-16 mx-auto text-surface-300"}),r(o),H(4),r(s),l(t,s)};_(tt,t=>{a(v)&&a(v).length===0&&!a(p)&&t(rt)})}r(g),l(J,g),bt()}export{Ut as default};
